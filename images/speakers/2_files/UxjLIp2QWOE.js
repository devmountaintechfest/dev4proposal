;/*FB_PKG_DELIM*/

__d("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql",["MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:!1,kind:"LocalArgument",name:"doesUserHaveAnEB"},c={defaultValue:!1,kind:"LocalArgument",name:"isEBWebOnlyOnboardingEnabled"},d={alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[a,c],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreInterstitialDialogWrapper_query"}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBOnboardingInterstitialDialogWrapper_query"}]},{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_vestaGetUserInfoResponse"}],storageKey:null}],storageKey:null},{kind:"ClientExtension",selections:[d]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[c,a],kind:"Operation",name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},e],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null},d]},{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},e],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},e],storageKey:null}],storageKey:null}]},{condition:"isEBWebOnlyOnboardingEnabled",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_onboarding_softblocks",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query",fragmentName:"MWEBOnboardingVariantInterstitialDialogChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_upsells_dismissed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_softblocks_dismissed",storageKey:null}]}],storageKey:null}]}]},params:{id:b("MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",operationKind:"query",text:null}}}();b("relay-runtime").PreloadableQueryRegistry.set(a.params.id,a);e.exports=a}),null);
__d("MWXDialogPageLoadingState.react",["cr:6995","cr:9910","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||(h=d("react"))).c,j=h;function a(a){var d=i(4);a=a.onClose;if(b("cr:9910")!=null){var e;e=(e=a)!=null?e:c("emptyFunction");var f;d[0]!==e?(f=j.jsx(b("cr:9910"),{onClose:e}),d[0]=e,d[1]=f):f=d[1];return f}if(b("cr:6995")!=null){d[2]!==a?(e=j.jsx(b("cr:6995"),{onClose:a}),d[2]=a,d[3]=e):e=d[3];return e}return null}g["default"]=a}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInbox.react",["BaseModal.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","InteractionTracing.xplat","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql","MWEBEntrypointsKillswitch.enum","MWEBUpsellDismissedEnum.facebook","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWXDialogPageLoadingState.react","MWXMultiStepDialog.react","ReQL","ReQLSuspense","cr:4181","cr:8727","promiseDone","react","useEncryptedBackupsProcessStatePreLoaded","useHasRestoreInterstitialSoftblockBeenDismissed","useMWChatEncryptedBackupsVestaUserInfo","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.useCallback,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=e.c,r=b("cr:8727")!=null;function s(a){c("promiseDone")(d("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:a,stateKey:c("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED}))}function t(a){var b=q(3),e=a.onDismiss;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=[],b[0]=a):a=b[0];m(v,a);b[1]!==e?(a=k.jsx(c("MWXMultiStepDialog.react"),{onClose:function(){d("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:e})},withCloseButton:!0,children:u}),b[1]=e,b[2]=a):a=b[2];return a}function u(a){return k.jsx(c("MWXDialogPageLoadingState.react"),{})}u.displayName=u.name+" [from "+f.id+"]";function v(){c("InteractionTracing.xplat").getPendingInteractions().forEach(w)}function w(a){a.addAnnotationBoolean("eb_loading_dialog_shown",!0)}function a(a){var e;a=a.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference;var g=d("CometRelay").usePreloadedQuery(h!==void 0?h:h=b("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql"),a),j=o(!1),m=l(function(a){j.current=a},[]),q=(i||(i=c("useReStore")))(),u=c("useEncryptedBackupsProcessStatePreLoaded")({entrypoint:c("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL,query:g});a=g==null?void 0:(a=g.viewer.messenger_default_encrypted_backup)==null?void 0:a.vesta_user_info;a=c("useMWChatEncryptedBackupsVestaUserInfo")({vestaGetUserInfoResponse$key:a});var v=(e=d("ReQLSuspense").useFirst(function(){return r&&u===2?d("ReQL").fromTableAscending(q.tables.experiences_shared_state).getKeyRange(c("MWEncryptedBackupsLocalStorageEntryEnum").EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME).map(function(a){a=a.stateValue;var b=Date.now()/1e3;return b<+a?!0:!1}):d("ReQL").empty()},[u,q],f.id+":125"))!=null?e:!1,w=c("useHasRestoreInterstitialSoftblockBeenDismissed")({backupState:u,isCooldownOrLockOutState:a.attemptsRemaining===0||a.loginTimeoutRemainingSecs!=null&&a.loginTimeoutRemainingSecs>0});e=p(g.viewer.is_eb_restore_upsells_dismissed===d("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED);var x=e[0],y=e[1];return n(function(){if(x)return null;if(u===4||j.current===!0){var a=d("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(c("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE);return b("cr:4181")==null||a||w?null:k.jsx(c("BaseModal.react"),{blockKeyCommands:!0,stackingBehavior:"above-everything",children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWEBRestoreInterstitialDialogWrapper",children:k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(t,{onDismiss:function(){y(!0),s(q)}}),name:"MWChatEncryptedBackupsUpsellMessengerInbox.RestoreInterstitialDialog",children:k.jsx(b("cr:4181"),{query:g,setIsClosed:y,setIsDialogPersisted:m,setIsDismissed:function(){return s(q)}})})})})}else if(b("cr:8727")&&u===2&&v===!1)return k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsUpsellMessengerInbox.OnboardingInterstitialDialog",children:k.jsx(b("cr:8727"),{onClose:function(){return y(!0)},query:g})});return null},[x,u,v,w,g,m,q])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInterstitialDialogWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWEBRestoreInterstitialDialogWrapper.react").__setRef("MWEBRestoreInterstitialDialogWrapperDeferred.react"));function a(a){return i.jsx(j,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxInfoCopyLinkPublicChat.react",["fbt","I64","LSIntEnum","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconLink","ReQL","ReQLSuspense","cometPushToast","react","useCopyText","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;b.useCallback;var n=b.c;function a(a){var b=n(14),e=a.threadKey,g=(i||(i=c("useReStore")))();b[0]!==g.tables.threads||b[1]!==e?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadInviteLink","threadInvitesEnabledV2"]).getKeyRange(e)},b[0]=g.tables.threads,b[1]=e,b[2]=a):a=b[2];var l;b[3]!==g||b[4]!==e?(l=[g,e],b[3]=g,b[4]=e,b[5]=l):l=b[5];a=d("ReQLSuspense").useFirst(a,l,f.id+":33");l=a==null?void 0:a.threadInviteLink;var o;b[6]!==l?(o={value:l},b[6]=l,b[7]=o):o=b[7];o=c("useCopyText")(o);var p=o[2];b[8]!==p?(o=function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","copy_link"),p(),d("cometPushToast").cometPushSimpleToast(h._("__JHASH__NNt0oNKP6tq__JHASH__"))},b[8]=p,b[9]=o):o=b[9];o=o;if(a==null)return null;a=(j||(j=d("I64"))).equal(a.threadInvitesEnabledV2,(k||(k=d("LSIntEnum"))).ofNumber(1));if(l==null||!a)return null;b[10]===Symbol["for"]("react.memo_cache_sentinel")?(l=m.jsx(c("MWXIconForListCell.react"),{icon:c("MWXIconLink")}),a=h._("__JHASH__c2UIg9XVAm2__JHASH__"),b[10]=l,b[11]=a):(l=b[10],a=b[11]);b[12]!==o?(l=m.jsx(c("MWInboxInfoButton.react"),{addOnStart:l,label:a,onPress:o}),b[12]=o,b[13]=l):l=b[13];return l}g["default"]=a}),226);
__d("useFetchPendingGroupInvitations",["LSFactory","LSOptimisticFetchPendingGroupInviteStoredProcedure","promiseDone","react","useMigrateURLParamsToRouteParams","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useEffect,k=b.c;function a(){var a=k(4),b=(h||(h=c("useReStore")))(),d=c("useMigrateURLParamsToRouteParams")();d=d.link_hash;var e=d!=null?String(d):null,g;a[0]!==e||a[1]!==b?(d=function(){e!=null&&c("promiseDone")(b.runInTransaction(function(a){return c("LSOptimisticFetchPendingGroupInviteStoredProcedure")(c("LSFactory")(a),{linkHash:e})},"readwrite",void 0,void 0,f.id+":27"))},g=[b,e],a[0]=e,a[1]=b,a[2]=d,a[3]=g):(d=a[2],g=a[3]);j(d,g);return e}g.useFetchPendingGroupInvitations=a}),98);
__d("useMWCMPausedChannelMemberDialog.react",["Int64Hooks","JSResourceForInteraction","emptyFunction","getValidMediaURL","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).c;function a(a){var b=i(8),e=a.threadImageUrl,f=a.threadImageUrlExpirationTimestampMs,g=a.threadImageUrlFallback,h=a.threadTitle;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(a=c("JSResourceForInteraction")("MWCMPausedChannelMemberDialog.react").__setRef("useMWCMPausedChannelMemberDialog.react"),b[0]=a):a=b[0];a=c("useMWXLazyDialog")(a);var j=a[0],k;b[1]!==e||b[2]!==g||b[3]!==h||b[4]!==f||b[5]!==j?(a=function(){if(e==null||g==null||h==null)return[c("emptyFunction"),!1];var a=c("getValidMediaURL")(f,e,g);return[function(){j({threadImageUrl:a,threadTitle:h},c("emptyFunction"))},!0]},k=[j,e,f,g,h],b[1]=e,b[2]=g,b[3]=h,b[4]=f,b[5]=j,b[6]=a,b[7]=k):(a=b[6],k=b[7]);return d("Int64Hooks").useMemoInt64(a,k)}g["default"]=a}),98);
__d("useHandlePublicChatShortlink",["I64","JSResourceForInteraction","LSIntEnum","ReQL","ReQLSuspense","ThreadStatus","promiseDone","react","useMWCMPausedChannelMemberDialog.react","useMWNavigation","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");var l=b.useEffect,m=b.useRef,n=b.c,o=c("JSResourceForInteraction")("MWJoinPublicChatDialog.react").__setRef("useHandlePublicChatShortlink");function a(a){var b=n(28),e=m(!1),g=m(!1),k=(h||(h=c("useReStore")))(),p=c("useMWXLazyDialog")(o),q=p[0],r;b[0]!==a||b[1]!==k?(p=function(){if(a!=null)return d("ReQL").fromTableAscending(k.tables.group_invitations_pending).getKeyRange(a);else return d("ReQL").empty()},r=[k,a],b[0]=a,b[1]=k,b[2]=p,b[3]=r):(p=b[2],r=b[3]);var s=d("ReQLSuspense").useFirst(p,r,f.id+":43");p=s==null?void 0:s.groupImageUrl;r=s==null?void 0:s.groupImageUrlExpirationTimestampMs;var t=s==null?void 0:s.groupImageUrlFallback,u=s==null?void 0:s.threadTitle,v;b[4]!==p||b[5]!==r||b[6]!==t||b[7]!==u?(v={threadImageUrl:p,threadImageUrlExpirationTimestampMs:r,threadImageUrlFallback:t,threadTitle:u},b[4]=p,b[5]=r,b[6]=t,b[7]=u,b[8]=v):v=b[8];p=c("useMWCMPausedChannelMemberDialog.react")(v);var w=p[0],x=p[1];b[9]!==s?(r=s!=null&&s.threadStatus!=null&&(i||(i=d("I64"))).equal(s.threadStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("ThreadStatus").PAUSED))&&s.linkJoinType!=null&&(i||(i=d("I64"))).equal(s.linkJoinType,(j||(j=d("LSIntEnum"))).ofNumber(5)),b[9]=s,b[10]=r):r=b[10];var y=r,z=c("useMWNavigation")();b[11]!==s||b[12]!==k||b[13]!==z||b[14]!==y||b[15]!==w||b[16]!==x||b[17]!==a||b[18]!==q?(t=function(){if(s!=null&&(s==null?void 0:s.isSubscribed)){if(s.threadId!=null){var b=s.threadId;c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(k.tables.threads).getKeyRange(b)),function(a){a!=null&&z.openInbox({threadKey:b,threadType:a.threadType},"publicChatShortlink")})}}else y&&!g.current?(w(),x&&(g.current=!0)):s!=null&&(s==null?void 0:s.threadTitle.length)>0&&s.linkJoinType!=null&&!(i||(i=d("I64"))).equal(s.linkJoinType,(j||(j=d("LSIntEnum"))).ofNumber(6))&&a!=null&&!e.current&&!y&&(e.current=!0,q({linkHash:a}))},b[11]=s,b[12]=k,b[13]=z,b[14]=y,b[15]=w,b[16]=x,b[17]=a,b[18]=q,b[19]=t):t=b[19];b[20]!==a||b[21]!==q||b[22]!==s||b[23]!==z||b[24]!==w||b[25]!==y||b[26]!==x?(u=[a,q,s,z,w,y,x],b[20]=a,b[21]=q,b[22]=s,b[23]=z,b[24]=w,b[25]=y,b[26]=x,b[27]=u):u=b[27];l(t,u)}g["default"]=a}),98);